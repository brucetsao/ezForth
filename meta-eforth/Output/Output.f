VARIABLE FILE_HANDLE
: WRITE_AXF_FILE
  S" ARM7EF.AXF" R/W CREATE-FILE
  ABORT" Create file error."
  FILE_HANDLE !
  ELF_HEADER HEADER_SIZE FILE_HANDLE @ WRITE-FILE
  ABORT" Write file error."
  IMAGE IMAGE_SIZE FILE_HANDLE @ WRITE-FILE
  ABORT" Write file error."
  FILE_HANDLE @ CLOSE-FILE
  ABORT" Close file error."
  ;

: WRITE_BIN_FILE
  S" ARM7EF.BIN" R/W CREATE-FILE
  ABORT" Create file error."
  FILE_HANDLE !
  IMAGE IMAGE_SIZE FILE_HANDLE @ WRITE-FILE
  ABORT" Write file error."
  ASCII_PATTERN_TABLE PATTERN_SIZE FILE_HANDLE @ WRITE-FILE
  ABORT" Write file error."
  BIG_PATTERN_TABLE BIG_PATTERN_SIZE FILE_HANDLE @ WRITE-FILE
  ABORT" Write file error."
  FILE_HANDLE @ CLOSE-FILE
  ABORT" Close file error."
  ;